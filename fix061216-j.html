<html>
<head><title>howm セキュリティ修正 2006-12-16</title></head>
<body>

<h1><a href="http://howm.sourceforge.jp/index-j.html">howm</a> セキュリティ修正 2006-12-16</h1>

howm-1.3.4 の更新記録より抜粋

<ul>
<li>何が問題?
<ul>
<li>Emacs には, ファイルごとにローカル変数を自動設定する機能があります.
        これを悪用すると, howm 使用時に任意の命令を自動実行させることができます.
        <a href="https://www.codeblog.org/blog/ueno/20060118.html">ref</a></li>
</ul></li>
<li>どう直した?
<ul>
<li>howm 関連の全シンボルに risky-local-variable 属性をセットし,
        上述の自動設定時にチェックが入るようにしました.</li>
</ul></li>
<li>バージョンアップしたくない/できないのですが?
<ul>
<li><p>ソースの編集が可能なら,
        howm.el の末尾に以下のコードを加えるのが確実です.
        バイトコンパイルのしなおしもお忘れなく.</p>
<pre>;; howm-1.2.2 以降用. howm 関連の全シンボルに risky-local-variable 属性.
(mapcar (lambda (symbol) (put symbol 'risky-local-variable t))
        (howm-symbols))</pre></li>
<li><p>それが困難な場合は .emacs に以下を加えてください.</p>
<pre>(eval-after-load "howm"  ; ← autoload/load/require の記述にあわせて
  ;; howm-1.2.2 以降用. howm 関連の全シンボルに risky-local-variable 属性.
  '(mapcar (lambda (symbol) (put symbol 'risky-local-variable t))
           (howm-symbols)))</pre></li>
<li>どちらにせよ, 修正が反映されたことをご確認ください.
<ul>
<li>emacs を立ち上げ直し, howm を起動</li>
<li><p>以下を *scratch* バッファに貼り, 閉じ括弧の後にカーソルを置いて C-j を
          押す</p>
<pre>(get 'howm-version 'risky-local-variable)</pre></li>
<li>t と表示されれば OK</li>
</ul></li>
</ul></li>
<li>ローカル変数の自動設定をあえて使いたいときは?
<ul>
<li><p>以下のように変数ごとに解禁してください.</p>
<pre>;; 例: 変数 howm-auto-narrow はファイルごとの自動設定を許可
(put 'howm-auto-narrow 'risky-local-variable nil)</pre></li>
</ul></li>
<li>howm に限らず, ローカル変数の自動設定を一切使えなくするには?
<ul>
<li><p>.emacs に以下を加えてください.
        ただし emacs のバージョンによっては不完全かもしれません.
        <a href="http://www.kmc.gr.jp/~tak/memo/emacs-local-variable.html">ref</a></p>
<pre>;; ローカル変数の自動設定をオフ
(setq enable-local-variables nil)</pre></li>
</ul></li>
</ul>

</body>
